<html>
<script src='https://d3js.org/d3.v5.min.js'></script>
<style> circle {fill: lightblue; stroke: black;} </style>
<body onload='init()'>
<svg width=5000 height=5000>
</svg>
<script>
async function init() {

    const data = await d3.csv('https://flunky.github.io/cars2017.csv');
    var xLogScale = d3.scaleLog()
        .domain([10,150])
        .range([0,200 ]);
    var yLogScale = d3.scaleLog()
        .domain([10,150])
        .range([200,0 ]);
    var margin=50;
    var ticks = [10,20,50,100];
    d3.select("svg")
      .append("g")
      .attr('transform', 'translate(' + margin + ',' + margin + ')')
      .selectAll("dot")
      .data(data)
      .enter()
      .append("circle")
        .attr("cx", function (d) { return xLogScale(d.AverageCityMPG); } )
        .attr("cy", function (d) { return yLogScale(d.AverageHighwayMPG); } )
        .attr("r", function(d) { return 2+ parseInt(d.EngineCylinders);});//apparently, all the data is in the form of a string
   d3.select("svg").append("g")
      .attr("transform","translate("+margin+","+margin+")")
      .call(d3.axisLeft(yLogScale)
              .tickValues(['10','20', '50', '100'])
              .tickFormat(d3.format('~s'))
            );
    d3.select("svg").append("g")
       .attr("transform","translate("+margin+","+(200+ margin)+")")
       .call(d3.axisBottom(xLogScale)
               .tickValues(['10','20', '50', '100'])
               .tickFormat(d3.format('~s'))
             );
  }
</script>
</body>
</html>
